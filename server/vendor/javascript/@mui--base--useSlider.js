import e from"@babel/runtime/helpers/esm/extends";import*as t from"react";import{unstable_ownerDocument as n,unstable_useControlled as r,unstable_useIsFocusVisible as o,unstable_useForkRef as s,unstable_useEnhancedEffect as u,unstable_useEventCallback as c,visuallyHidden as a}from"@mui/utils";import{areArraysEqual as i,extractEventHandlers as l}from"@mui/base/utils";"use client";const f=2;function asc(e,t){return e-t}function clamp(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function findClosest(e,t){var n;const{index:r}=(n=e.reduce(((e,n,r)=>{const o=Math.abs(t-n);return e===null||o<e.distance||o===e.distance?{distance:o,index:r}:e}),null))!=null?n:{};return r}function trackFinger(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return false}return{x:e.clientX,y:e.clientY}}function valueToPercent(e,t,n){return 100*(e-t)/(n-t)}function percentToValue(e,t,n){return(n-t)*e+t}function getDecimalPrecision(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-");const n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function roundValueToStep(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(getDecimalPrecision(t)))}function setValueIndex({values:e,newValue:t,index:n}){const r=e.slice();r[n]=t;return r.sort(asc)}function focusThumb({sliderRef:e,activeIndex:t,setActive:r}){var o,s;const u=n(e.current);if(!((o=e.current)!=null&&o.contains(u.activeElement))||Number(u==null||(s=u.activeElement)==null?void 0:s.getAttribute("data-index"))!==t){var c;(c=e.current)==null||c.querySelector(`[type="range"][data-index="${t}"]`).focus()}r&&r(t)}function areValuesEqual(e,t){return typeof e==="number"&&typeof t==="number"?e===t:typeof e==="object"&&typeof t==="object"&&i(e,t)}const d={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}};const Identity=e=>e;let v;function doesSupportTouchActionNone(){v===void 0&&(v=typeof CSS==="undefined"||typeof CSS.supports!=="function"||CSS.supports("touch-action","none"));return v}function useSlider(i){const{"aria-labelledby":v,defaultValue:m,disabled:p=false,disableSwap:h=false,isRtl:g=false,marks:b=false,max:x=100,min:y=0,name:T,onChange:E,onChangeCommitted:S,orientation:V="horizontal",rootRef:I,scale:w=Identity,step:A=1,tabIndex:R,value:C}=i;const L=t.useRef();const[M,P]=t.useState(-1);const[k,F]=t.useState(-1);const[N,O]=t.useState(false);const $=t.useRef(0);const[q,D]=r({controlled:C,default:m!=null?m:y,name:"Slider"});const z=E&&((e,t,n)=>{const r=e.nativeEvent||e;const o=new r.constructor(r.type,r);Object.defineProperty(o,"target",{writable:true,value:{value:t,name:T}});E(o,t,n)});const B=Array.isArray(q);let j=B?q.slice().sort(asc):[q];j=j.map((e=>clamp(e,y,x)));const X=b===true&&A!==null?[...Array(Math.floor((x-y)/A)+1)].map(((e,t)=>({value:y+A*t}))):b||[];const Y=X.map((e=>e.value));const{isFocusVisibleRef:H,onBlur:G,onFocus:J,ref:K}=o();const[Q,U]=t.useState(-1);const W=t.useRef();const Z=s(K,W);const _=s(I,Z);const createHandleHiddenInputFocus=e=>t=>{var n;const r=Number(t.currentTarget.getAttribute("data-index"));J(t);H.current===true&&U(r);F(r);e==null||(n=e.onFocus)==null||n.call(e,t)};const createHandleHiddenInputBlur=e=>t=>{var n;G(t);H.current===false&&U(-1);F(-1);e==null||(n=e.onBlur)==null||n.call(e,t)};u((()=>{if(p&&W.current.contains(document.activeElement)){var e;(e=document.activeElement)==null||e.blur()}}),[p]);p&&M!==-1&&P(-1);p&&Q!==-1&&U(-1);const createHandleHiddenInputChange=e=>t=>{var n;(n=e.onChange)==null||n.call(e,t);const r=Number(t.currentTarget.getAttribute("data-index"));const o=j[r];const s=Y.indexOf(o);let u=t.target.valueAsNumber;if(X&&A==null){const e=Y[Y.length-1];u=u>e?e:u<Y[0]?Y[0]:u<o?Y[s-1]:Y[s+1]}u=clamp(u,y,x);if(B){h&&(u=clamp(u,j[r-1]||-Infinity,j[r+1]||Infinity));const e=u;u=setValueIndex({values:j,newValue:u,index:r});let t=r;h||(t=u.indexOf(e));focusThumb({sliderRef:W,activeIndex:t})}D(u);U(r);z&&!areValuesEqual(u,q)&&z(t,u,r);S&&S(t,u)};const ee=t.useRef();let te=V;g&&V==="horizontal"&&(te+="-reverse");const getFingerNewValue=({finger:e,move:t=false})=>{const{current:n}=W;const{width:r,height:o,bottom:s,left:u}=n.getBoundingClientRect();let c;c=te.indexOf("vertical")===0?(s-e.y)/o:(e.x-u)/r;te.indexOf("-reverse")!==-1&&(c=1-c);let a;a=percentToValue(c,y,x);if(A)a=roundValueToStep(a,A,y);else{const e=findClosest(Y,a);a=Y[e]}a=clamp(a,y,x);let i=0;if(B){i=t?ee.current:findClosest(j,a);h&&(a=clamp(a,j[i-1]||-Infinity,j[i+1]||Infinity));const e=a;a=setValueIndex({values:j,newValue:a,index:i});if(!(h&&t)){i=a.indexOf(e);ee.current=i}}return{newValue:a,activeIndex:i}};const ne=c((e=>{const t=trackFinger(e,L);if(!t)return;$.current+=1;if(e.type==="mousemove"&&e.buttons===0){re(e);return}const{newValue:n,activeIndex:r}=getFingerNewValue({finger:t,move:true});focusThumb({sliderRef:W,activeIndex:r,setActive:P});D(n);!N&&$.current>f&&O(true);z&&!areValuesEqual(n,q)&&z(e,n,r)}));const re=c((e=>{const t=trackFinger(e,L);O(false);if(!t)return;const{newValue:n}=getFingerNewValue({finger:t,move:true});P(-1);e.type==="touchend"&&F(-1);S&&S(e,n);L.current=void 0;se()}));const oe=c((e=>{if(p)return;doesSupportTouchActionNone()||e.preventDefault();const t=e.changedTouches[0];t!=null&&(L.current=t.identifier);const r=trackFinger(e,L);if(r!==false){const{newValue:t,activeIndex:n}=getFingerNewValue({finger:r});focusThumb({sliderRef:W,activeIndex:n,setActive:P});D(t);z&&!areValuesEqual(t,q)&&z(e,t,n)}$.current=0;const o=n(W.current);o.addEventListener("touchmove",ne);o.addEventListener("touchend",re)}));const se=t.useCallback((()=>{const e=n(W.current);e.removeEventListener("mousemove",ne);e.removeEventListener("mouseup",re);e.removeEventListener("touchmove",ne);e.removeEventListener("touchend",re)}),[re,ne]);t.useEffect((()=>{const{current:e}=W;e.addEventListener("touchstart",oe,{passive:doesSupportTouchActionNone()});return()=>{e.removeEventListener("touchstart",oe,{passive:doesSupportTouchActionNone()});se()}}),[se,oe]);t.useEffect((()=>{p&&se()}),[p,se]);const createHandleMouseDown=e=>t=>{var r;(r=e.onMouseDown)==null||r.call(e,t);if(p)return;if(t.defaultPrevented)return;if(t.button!==0)return;t.preventDefault();const o=trackFinger(t,L);if(o!==false){const{newValue:e,activeIndex:n}=getFingerNewValue({finger:o});focusThumb({sliderRef:W,activeIndex:n,setActive:P});D(e);z&&!areValuesEqual(e,q)&&z(t,e,n)}$.current=0;const s=n(W.current);s.addEventListener("mousemove",ne);s.addEventListener("mouseup",re)};const ue=valueToPercent(B?j[0]:y,y,x);const ce=valueToPercent(j[j.length-1],y,x)-ue;const getRootProps=(t={})=>{const n=l(t);const r={onMouseDown:createHandleMouseDown(n||{})};const o=e({},n,r);return e({},t,{ref:_},o)};const createHandleMouseOver=e=>t=>{var n;(n=e.onMouseOver)==null||n.call(e,t);const r=Number(t.currentTarget.getAttribute("data-index"));F(r)};const createHandleMouseLeave=e=>t=>{var n;(n=e.onMouseLeave)==null||n.call(e,t);F(-1)};const getThumbProps=(t={})=>{const n=l(t);const r={onMouseOver:createHandleMouseOver(n||{}),onMouseLeave:createHandleMouseLeave(n||{})};return e({},t,n,r)};const getThumbStyle=e=>({pointerEvents:M!==-1&&M!==e?"none":void 0});const getHiddenInputProps=(t={})=>{var n;const r=l(t);const o={onChange:createHandleHiddenInputChange(r||{}),onFocus:createHandleHiddenInputFocus(r||{}),onBlur:createHandleHiddenInputBlur(r||{})};const s=e({},r,o);return e({tabIndex:R,"aria-labelledby":v,"aria-orientation":V,"aria-valuemax":w(x),"aria-valuemin":w(y),name:T,type:"range",min:i.min,max:i.max,step:i.step===null&&i.marks?"any":(n=i.step)!=null?n:void 0,disabled:p},t,s,{style:e({},a,{direction:g?"rtl":"ltr",width:"100%",height:"100%"})})};return{active:M,axis:te,axisProps:d,dragging:N,focusedThumbIndex:Q,getHiddenInputProps:getHiddenInputProps,getRootProps:getRootProps,getThumbProps:getThumbProps,marks:X,open:k,range:B,rootRef:_,trackLeap:ce,trackOffset:ue,values:j,getThumbStyle:getThumbStyle}}"use client";export{Identity,useSlider,valueToPercent};

