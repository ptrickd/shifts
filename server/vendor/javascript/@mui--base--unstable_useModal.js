import e from"@babel/runtime/helpers/esm/extends";import*as n from"react";import{unstable_ownerDocument as t,unstable_ownerWindow as o,unstable_getScrollbarSize as r,unstable_useForkRef as i,unstable_useEventCallback as s,unstable_createChainedFunction as a}from"@mui/utils";import{extractEventHandlers as l}from"@mui/base/utils";function isOverflowing(e){const n=t(e);return n.body===e?o(e).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ariaHidden(e,n){n?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function getPaddingRight(e){return parseInt(o(e).getComputedStyle(e).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"];const t=n.indexOf(e.tagName)!==-1;const o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return t||o}function ariaHiddenSiblings(e,n,t,o,r){const i=[n,t,...o];[].forEach.call(e.children,(e=>{const n=i.indexOf(e)===-1;const t=!isAriaHiddenForbiddenOnElement(e);n&&t&&ariaHidden(e,r)}))}function findIndexOf(e,n){let t=-1;e.some(((e,o)=>{if(n(e)){t=o;return true}return false}));return t}function handleContainer(e,n){const i=[];const s=e.container;if(!n.disableScrollLock){if(isOverflowing(s)){const e=r(t(s));i.push({value:s.style.paddingRight,property:"padding-right",el:s});s.style.paddingRight=`${getPaddingRight(s)+e}px`;const n=t(s).querySelectorAll(".mui-fixed");[].forEach.call(n,(n=>{i.push({value:n.style.paddingRight,property:"padding-right",el:n});n.style.paddingRight=`${getPaddingRight(n)+e}px`}))}let e;if(s.parentNode instanceof DocumentFragment)e=t(s).body;else{const n=s.parentElement;const t=o(s);e=(n==null?void 0:n.nodeName)==="HTML"&&t.getComputedStyle(n).overflowY==="scroll"?n:s}i.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e});e.style.overflow="hidden"}const restore=()=>{i.forEach((({value:e,el:n,property:t})=>{e?n.style.setProperty(t,e):n.style.removeProperty(t)}))};return restore}function getHiddenSiblings(e){const n=[];[].forEach.call(e.children,(e=>{e.getAttribute("aria-hidden")==="true"&&n.push(e)}));return n}class ModalManager{constructor(){this.containers=void 0;this.modals=void 0;this.modals=[];this.containers=[]}add(e,n){let t=this.modals.indexOf(e);if(t!==-1)return t;t=this.modals.length;this.modals.push(e);e.modalRef&&ariaHidden(e.modalRef,false);const o=getHiddenSiblings(n);ariaHiddenSiblings(n,e.mount,e.modalRef,o,true);const r=findIndexOf(this.containers,(e=>e.container===n));if(r!==-1){this.containers[r].modals.push(e);return t}this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:o});return t}mount(e,n){const t=findIndexOf(this.containers,(n=>n.modals.indexOf(e)!==-1));const o=this.containers[t];o.restore||(o.restore=handleContainer(o,n))}remove(e,n=true){const t=this.modals.indexOf(e);if(t===-1)return t;const o=findIndexOf(this.containers,(n=>n.modals.indexOf(e)!==-1));const r=this.containers[o];r.modals.splice(r.modals.indexOf(e),1);this.modals.splice(t,1);if(r.modals.length===0){r.restore&&r.restore();e.modalRef&&ariaHidden(e.modalRef,n);ariaHiddenSiblings(r.container,e.mount,e.modalRef,r.hiddenSiblings,false);this.containers.splice(o,1)}else{const e=r.modals[r.modals.length-1];e.modalRef&&ariaHidden(e.modalRef,false)}return t}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}"use client";function getContainer(e){return typeof e==="function"?e():e}function getHasTransition(e){return!!e&&e.props.hasOwnProperty("in")}const d=new ModalManager;function useModal(o){const{container:r,disableEscapeKeyDown:c=false,disableScrollLock:u=false,manager:f=d,closeAfterTransition:p=false,onTransitionEnter:h,onTransitionExited:m,children:g,onClose:y,open:R,rootRef:b}=o;const v=n.useRef({});const E=n.useRef(null);const T=n.useRef(null);const x=i(T,b);const[O,C]=n.useState(!R);const H=getHasTransition(g);let S=true;o["aria-hidden"]!=="false"&&o["aria-hidden"]!==false||(S=false);const getDoc=()=>t(E.current);const getModal=()=>{v.current.modalRef=T.current;v.current.mount=E.current;return v.current};const handleMounted=()=>{f.mount(getModal(),{disableScrollLock:u});T.current&&(T.current.scrollTop=0)};const P=s((()=>{const e=getContainer(r)||getDoc().body;f.add(getModal(),e);T.current&&handleMounted()}));const w=n.useCallback((()=>f.isTopModal(getModal())),[f]);const M=s((e=>{E.current=e;e&&(R&&w()?handleMounted():T.current&&ariaHidden(T.current,S))}));const A=n.useCallback((()=>{f.remove(getModal(),S)}),[S,f]);n.useEffect((()=>()=>{A()}),[A]);n.useEffect((()=>{R?P():H&&p||A()}),[R,A,H,p,P]);const createHandleKeyDown=e=>n=>{var t;(t=e.onKeyDown)==null||t.call(e,n);if(n.key==="Escape"&&n.which!==229&&w()&&!c){n.stopPropagation();y&&y(n,"escapeKeyDown")}};const createHandleBackdropClick=e=>n=>{var t;(t=e.onClick)==null||t.call(e,n);n.target===n.currentTarget&&y&&y(n,"backdropClick")};const getRootProps=(n={})=>{const t=l(o);delete t.onTransitionEnter;delete t.onTransitionExited;const r=e({},t,n);return e({role:"presentation"},r,{onKeyDown:createHandleKeyDown(r),ref:x})};const getBackdropProps=(n={})=>{const t=n;return e({"aria-hidden":true},t,{onClick:createHandleBackdropClick(t),open:R})};const getTransitionProps=()=>{const handleEnter=()=>{C(false);h&&h()};const handleExited=()=>{C(true);m&&m();p&&A()};return{onEnter:a(handleEnter,g==null?void 0:g.props.onEnter),onExited:a(handleExited,g==null?void 0:g.props.onExited)}};return{getRootProps:getRootProps,getBackdropProps:getBackdropProps,getTransitionProps:getTransitionProps,rootRef:x,portalRef:M,isTopModal:w,exited:O,hasTransition:H}}"use client";export{ModalManager,ariaHidden,useModal as unstable_useModal};

