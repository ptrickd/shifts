import*as e from"react";import t from"prop-types";import{unstable_useForkRef as n,unstable_ownerDocument as r,unstable_useEventCallback as o,elementAcceptingRef as c,exactProp as s}from"@mui/utils";import{jsx as i}from"react/jsx-runtime";"use client";function mapEventPropToEvent(e){return e.substring(2).toLowerCase()}function clickedRootScrollbar(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function ClickAwayListener(t){const{children:c,disableReactTree:s=false,mouseEvent:u="onClick",onClickAway:l,touchEvent:a="onTouchEnd"}=t;const f=e.useRef(false);const p=e.useRef(null);const m=e.useRef(false);const E=e.useRef(false);e.useEffect((()=>{setTimeout((()=>{m.current=true}),0);return()=>{m.current=false}}),[]);const d=n(c.ref,p);const v=o((e=>{const t=E.current;E.current=false;const n=r(p.current);if(!m.current||!p.current||"clientX"in e&&clickedRootScrollbar(e,n))return;if(f.current){f.current=false;return}let o;o=e.composedPath?e.composedPath().indexOf(p.current)>-1:!n.documentElement.contains(e.target)||p.current.contains(e.target);o||!s&&t||l(e)}));const createHandleSynthetic=e=>t=>{E.current=true;const n=c.props[e];n&&n(t)};const h={ref:d};a!==false&&(h[a]=createHandleSynthetic(a));e.useEffect((()=>{if(a!==false){const e=mapEventPropToEvent(a);const t=r(p.current);const handleTouchMove=()=>{f.current=true};t.addEventListener(e,v);t.addEventListener("touchmove",handleTouchMove);return()=>{t.removeEventListener(e,v);t.removeEventListener("touchmove",handleTouchMove)}}}),[v,a]);u!==false&&(h[u]=createHandleSynthetic(u));e.useEffect((()=>{if(u!==false){const e=mapEventPropToEvent(u);const t=r(p.current);t.addEventListener(e,v);return()=>{t.removeEventListener(e,v)}}}),[v,u]);return i(e.Fragment,{children:e.cloneElement(c,h)})}process.env.NODE_ENV!=="production"?ClickAwayListener.propTypes={children:c.isRequired,disableReactTree:t.bool,mouseEvent:t.oneOf(["onClick","onMouseDown","onMouseUp","onPointerDown","onPointerUp",false]),onClickAway:t.func.isRequired,touchEvent:t.oneOf(["onTouchEnd","onTouchStart",false])}:void 0;process.env.NODE_ENV!=="production"&&(ClickAwayListener.propTypes=s(ClickAwayListener.propTypes));export{ClickAwayListener};

