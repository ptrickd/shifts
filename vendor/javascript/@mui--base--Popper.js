import e from"@babel/runtime/helpers/esm/extends";import t from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";import*as o from"react";import{unstable_useForkRef as n,unstable_useEnhancedEffect as r,unstable_ownerDocument as s,HTMLElementType as i,chainPropTypes as l,refType as p}from"@mui/utils";import{createPopper as a}from"@popperjs/core";import c from"prop-types";import{unstable_composeClasses as f}from"@mui/base/composeClasses";import{Portal as u}from"@mui/base/Portal";import{generateUtilityClass as d}from"@mui/base/generateUtilityClass";import{generateUtilityClasses as m}from"@mui/base/generateUtilityClasses";import{useSlotProps as h}from"@mui/base/utils";import{useClassNamesOverride as b}from"../utils/ClassNameConfigurator.js";import{jsx as E}from"react/jsx-runtime";function getPopperUtilityClass(e){return d("MuiPopper",e)}const y=m("MuiPopper",["root"]);"use client";const P=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],v=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function resolveAnchorEl(e){return typeof e==="function"?e():e}function isHTMLElement(e){return e.nodeType!==void 0}function isVirtualElement(e){return!isHTMLElement(e)}const useUtilityClasses=()=>{const e={root:["root"]};return f(e,b(getPopperUtilityClass))};const T={};const g=o.forwardRef((function PopperTooltip(s,i){var l;const{anchorEl:p,children:c,direction:f,disablePortal:u,modifiers:d,open:m,placement:b,popperOptions:y,popperRef:v,slotProps:T={},slots:g={},TransitionProps:O}=s,M=t(s,P);const R=o.useRef(null);const j=n(R,i);const w=o.useRef(null);const x=n(w,v);const C=o.useRef(x);r((()=>{C.current=x}),[x]);o.useImperativeHandle(v,(()=>w.current),[]);const U=flipPlacement(b,f);const[N,H]=o.useState(U);const[L,I]=o.useState(resolveAnchorEl(p));o.useEffect((()=>{w.current&&w.current.forceUpdate()}));o.useEffect((()=>{p&&I(resolveAnchorEl(p))}),[p]);r((()=>{if(!L||!m)return;const handlePopperUpdate=e=>{H(e.placement)};if(process.env.NODE_ENV!=="production"&&L&&isHTMLElement(L)&&L.nodeType===1){const e=L.getBoundingClientRect();process.env.NODE_ENV!=="test"&&e.top===0&&e.left===0&&e.right===0&&e.bottom===0&&console.warn(["MUI: The `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}let t=[{name:"preventOverflow",options:{altBoundary:u}},{name:"flip",options:{altBoundary:u}},{name:"onUpdate",enabled:true,phase:"afterWrite",fn:({state:e})=>{handlePopperUpdate(e)}}];d!=null&&(t=t.concat(d));y&&y.modifiers!=null&&(t=t.concat(y.modifiers));const o=a(L,R.current,e({placement:U},y,{modifiers:t}));C.current(o);return()=>{o.destroy();C.current(null)}}),[L,u,d,m,y,U]);const S={placement:N};O!==null&&(S.TransitionProps=O);const V=useUtilityClasses();const k=(l=g.root)!=null?l:"div";const A=h({elementType:k,externalSlotProps:T.root,externalForwardedProps:M,additionalProps:{role:"tooltip",ref:j},ownerState:s,className:V.root});return E(k,e({},A,{children:typeof c==="function"?c(S):c}))}));const O=o.forwardRef((function Popper(n,r){const{anchorEl:i,children:l,container:p,direction:a="ltr",disablePortal:c=false,keepMounted:f=false,modifiers:d,open:m,placement:h="bottom",popperOptions:b=T,popperRef:y,style:P,transition:O=false,slotProps:M={},slots:R={}}=n,j=t(n,v);const[w,x]=o.useState(true);const handleEnter=()=>{x(false)};const handleExited=()=>{x(true)};if(!f&&!m&&(!O||w))return null;let C;if(p)C=p;else if(i){const e=resolveAnchorEl(i);C=e&&isHTMLElement(e)?s(e).body:s(null).body}const U=m||!f||O&&!w?void 0:"none";const N=O?{in:m,onEnter:handleEnter,onExited:handleExited}:void 0;return E(u,{disablePortal:c,container:C,children:E(g,e({anchorEl:i,direction:a,disablePortal:c,modifiers:d,ref:r,open:O?!w:m,placement:h,popperOptions:b,popperRef:y,slotProps:M,slots:R},j,{style:e({position:"fixed",top:0,left:0,display:U},P),TransitionProps:N,children:l}))})}));process.env.NODE_ENV!=="production"?O.propTypes={anchorEl:l(c.oneOfType([i,c.object,c.func]),(e=>{if(e.open){const t=resolveAnchorEl(e.anchorEl);if(t&&isHTMLElement(t)&&t.nodeType===1){const e=t.getBoundingClientRect();if(process.env.NODE_ENV!=="test"&&e.top===0&&e.left===0&&e.right===0&&e.bottom===0)return new Error(["MUI: The `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}else if(!t||typeof t.getBoundingClientRect!=="function"||isVirtualElement(t)&&t.contextElement!=null&&t.contextElement.nodeType!==1)return new Error(["MUI: The `anchorEl` prop provided to the component is invalid.","It should be an HTML element instance or a virtualElement ","(https://popper.js.org/docs/v2/virtual-elements/)."].join("\n"))}return null})),children:c/* @typescript-to-proptypes-ignore */.oneOfType([c.node,c.func]),container:c/* @typescript-to-proptypes-ignore */.oneOfType([i,c.func]),direction:c.oneOf(["ltr","rtl"]),disablePortal:c.bool,keepMounted:c.bool,modifiers:c.arrayOf(c.shape({data:c.object,effect:c.func,enabled:c.bool,fn:c.func,name:c.any,options:c.object,phase:c.oneOf(["afterMain","afterRead","afterWrite","beforeMain","beforeRead","beforeWrite","main","read","write"]),requires:c.arrayOf(c.string),requiresIfExists:c.arrayOf(c.string)})),open:c.bool.isRequired,placement:c.oneOf(["auto-end","auto-start","auto","bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),popperOptions:c.shape({modifiers:c.array,onFirstUpdate:c.func,placement:c.oneOf(["auto-end","auto-start","auto","bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),strategy:c.oneOf(["absolute","fixed"])}),popperRef:p,slotProps:c.shape({root:c.oneOfType([c.func,c.object])}),slots:c.shape({root:c.elementType}),transition:c.bool}:void 0;"use client";export{O as Popper,getPopperUtilityClass,y as popperClasses};

